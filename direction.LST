C51 COMPILER V9.52.0.0   DIRECTION                                                         04/09/2016 11:00:11 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE DIRECTION
OBJECT MODULE PLACED IN direction.OBJ
COMPILER INVOKED BY: F:\Keil\C51\BIN\C51.EXE direction.c LARGE BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include "config.h"
   2          
   3          /***************************向前走*****************************/
   4          void forward() 
   5          {
   6   1          pwm_left(speed);
   7   1          pwm_right(speed);
   8   1      }
   9          /*左转90度，自动恢复*/
  10          void turn_left()
  11          {
  12   1        //调试参数修改转弯模式
  13   1          pwm_left(0);
  14   1          pwm_right(speed);
  15   1        //调试参数，1-255
  16   1          delay_ms(2000);
  17   1          pwm_left(speed);
  18   1          pwm_right(speed);
  19   1      }
  20          
  21          /*右转90度，自动恢复*/
  22          void turn_right()
  23          {
  24   1        //调试参数修改转弯模式
  25   1          pwm_left(speed);
  26   1          pwm_right(0);
  27   1        //调试参数，0-65536
  28   1          delay_ms(2000);
  29   1          pwm_left(speed);
  30   1          pwm_right(speed);
  31   1      }
  32          
  33          void adjust_left()
  34          {
  35   1        u8 temp=TLIN;
  36   1          pwm_left(0);
  37   1          pwm_right(speed);
  38   1        //????????
  39   1        //??????
  40   1        //??130 delay_ms(100)
  41   1        //??170 delay_ms(180) 1?150 too samll
  42   1        //
  43   1          delay_ms(220);
  44   1          //?????
  45   1          for(;temp!=0x00;temp=TLIN)//???????
  46   1          {
  47   2          }
  48   1          //??
  49   1          pwm_left(speed);
  50   1          pwm_right(0);
  51   1          //????
  52   1          delay_ms(200);
  53   1          //????
  54   1          pwm_left(speed);
  55   1          pwm_right(speed);
C51 COMPILER V9.52.0.0   DIRECTION                                                         04/09/2016 11:00:11 PAGE 2   

  56   1          return;
  57   1          
  58   1      }
  59          void adjust_right()
  60          {
  61   1          u8 temp=TLIN;
  62   1          // 右转
  63   1          pwm_left(speed);
  64   1          pwm_right(0);
  65   1          
  66   1          delay_ms(200);
  67   1      
  68   1          for(;temp!=0x00;temp=TLIN)//
  69   1          {
  70   2        //    delay_ms(10);
  71   2          }
  72   1      
  73   1          pwm_left(0);
  74   1          pwm_right(speed);
  75   1          //
  76   1          delay_ms(150);
  77   1          //
  78   1          pwm_left(speed);
  79   1          pwm_right(speed);
  80   1          return;
  81   1      
  82   1      }
  83          
  84          /************************
  85          //左转可调，自动恢复
  86          //t1:保持左转状态时间 1-65536
  87          //t2:回调时间 1-65536
  88          *************************/
  89          void turn_leftn(u16 t1,u16 t2)
  90          {
  91   1        //调试参数修改转弯模式
  92   1          pwm_left(0);
  93   1          pwm_right(speed);
  94   1        //:保持左转状态时间
  95   1          delay_ms(t1);
  96   1          //回调
  97   1          //回调时pwm比需要计算、调试
  98   1          pwm_left(speed);
  99   1          pwm_right(0);
 100   1            //回调时间
 101   1          delay_ms(t2);
 102   1          //恢复前行
 103   1          pwm_left(speed);
 104   1          pwm_right(speed);
 105   1      }
 106          
 107          /************************
 108          //右转可调，支持转弯后回调
 109          //t1:保持右转状态时间 1-255
 110          //t2:回调时间 1-255
 111          *************************/
 112          void turn_rightn(u16 t1,u16 t2)
 113          {
 114   1        
 115   1        //调试参数修改转弯模式
 116   1          pwm_left(speed);
 117   1          pwm_right(0);
C51 COMPILER V9.52.0.0   DIRECTION                                                         04/09/2016 11:00:11 PAGE 3   

 118   1        //保持右转状态时间
 119   1          delay_ms(t1);
 120   1          
 121   1          //回调
 122   1          //回调时pwm比需要计算、调试
 123   1          pwm_left(0);
 124   1          pwm_right(speed);
 125   1            //回调时间
 126   1          delay_ms(t2);
 127   1          
 128   1          //恢复前行
 129   1          pwm_left(speed);
 130   1          pwm_right(speed);
 131   1      
 132   1      }
 133          
 134          
 135          
 136          
 137          
 138          
 139            


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    308    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----      10
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
